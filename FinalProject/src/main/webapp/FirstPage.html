<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-tw">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
	integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
	crossorigin="anonymous">
<link rel="stylesheet" href="css/fp.css">
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="js/firstpage.js"></script>
<script src="js/wall.js"></script>
<script src="js/basic.js"></script>

<script src="js/otherLogin.js"></script><!--第三方登入javascript-->

<script src="https://apis.google.com/js/platform.js" async defer></script><!--google登入用-->
<meta name="google-signin-client_id" content='104571294251-h62qr1fa8502dmuolcrt6tmfa3brto1f.apps.googleusercontent.com'><!--google登入用-->
<title>首頁</title>
<script>
    $(document).ready(function(){
    	$.post("HotController",function(data, status) {
			if (status == "success") {
				var querydata = $.parseJSON(data);	
				var text=""
				$.each(querydata, function(index, json) {
				text +='<div class="card" style="width: 18rem; padding: 10px;">'+
				'<img class="card-img-top" src="image/'+json.model+'.jpg" width="100px" alt="Card image cap">'+
				'<div class="card-body">'+
				'<a href="#"> <img src="image/heart.png" width="20px"></a>'+
				'<h5 class="card-title">'+json.model+'</h5>'+
				'<h5 class="card-title" style="color: red">$'+json.price+'</h5>'+
				'<a href="#" class="btn btn-danger">加入購物車 <img src="image/shopping-cart (1).png" width="20px"></a>'+
                '</div></div>'
					
				})

				$(".forcard").html(text);
			}})
    })
</script>
</head>

<body>
<div id="show"></div>
	<header>
		<div style="align-items: baseline;"
			class="d-flex justify-content-between">
			<div class="navv">
				<li>
					<ul>
						<a href="FirstPage.html"> <img src="image/001.png"
							width="120px">
						</a>
					</ul>
				</li>

			</div>
			<div class="navv">
				<a href="FirstPage.html"><button type="button"
						class="btn btn-dark btnchoose">
						<img src="image/shopping-bag.png" width="20px"> <br>線上購物
					</button></a> <a href="CustomizedPage.html"><button type="button"
						class="btn btn-dark btnchoose">
						<img src="image/note.png" width="20px"> <br>自組電腦
					</button></a> <a href="Pk.html"><button type="button"
						class="btn btn-dark btnchoose">
						<img
							src="image/football-signal-of-a-game-announcement-of-one-team-vs-other_w.png"
							width="20px"> <br>商品比較
					</button></a>
			</div>
			<div class="navv">
				<ul>
					<li>
						<a id="test" href=""> <img src="image/shopping-cart.png"
							width="30px">
						</a>
					</li>
					<li>
						<a href="" data-toggle="modal" data-target="#exampleModalCenter">
							<img src="image/avatar.png" width="30px">
						</a>

					</li>
				</ul>
				<fieldset id="myModal" class="mymodal">
					<div class="dropdown-divider"></div>
					<a href='ShowCart.html'><button style="width: 300px"
							class='btn btn-dark'>查看購物車</button></a>
			</fieldset>
			</div>
		</div>
		
		<!-- Modal -->
		<div style="margin:0px auto" class="modal fade" id="exampleModalCenter" tabindex="-1"
			role="dialog" aria-labelledby="exampleModalCenterTitle"
			aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 style="width:100%;text-align:center" class="modal-title" id="exampleModalLongTitle">Login   登入</h5>
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					
						<div class="modal-body">
							<div class="form-group">
								<label for="exampleInputEmail1">Email</label><span class="errorMsg" id="memberLoginErrorEmail"></span> 
								<input
									type="email" class="form-control" id="memberInputEmail"
									aria-describedby="emailHelp" placeholder="Enter email">
							</div>
							<div class="form-group">
								<label for="exampleInputPassword1">密碼</label><span class="errorMsg" id="memberLoginErrorPassword"></span> 
								<input
									type="password" class="form-control" id="memberInputPassword"
									placeholder="Password">
							</div>
							<span> <a href="Register.html"> 尚未註冊?</a><span id="memberBothErrorMsg" style="color: red"></span> 
							</span>
							
						    <br>
							<button id="gogogsubmit"  class="mymodelbtn btn-dark">送出</button>
							<div class="form-check">
								<input type="checkbox" class="form-check-input"
									id="exampleCheck1"> <label class="form-check-label"
									for="exampleCheck1">記住密碼</label>
							</div>
							
							<div class="dropdown-divider"></div>
							<button class="mymodelbtn btn-primary" id="loginByFacebook">使用facebook登入</button>
							<div class="fb-login-button" data-max-rows="1" data-size="large" data-button-type="continue_with" data-show-faces="false" data-auto-logout-link="true" data-use-continue-as="false"></div>
							<fb:login-button scope="public_profile,email" onlogin="checkLoginState();" auto_logout_link="true" size="large"	show_faces="true"></fb:login-button>
							<div class="dropdown-divider"></div>
							<button class="mymodelbtn btn-primary">使用google登入</button>
						</div>
						
					
				</div>
			</div>
		</div>

	</header>
    </header>


	<nav>
		<!--搜尋器和輪播牆-->
		<div class="search">
			<div class="btn-group">
				<button type="button" class="btn btn-secondary btnwidth">分類</button>
				<button id="catebtn" type="button"
					class="btn btn-secondary dropdown-toggle" data-toggle="dropdown">
					<span class="caret"></span> <span class="sr-only">Toggle
						Dropdown</span>
				</button>
				<div id="categorybtn" class="dropdown-menu dropdown-menu-right menustyle" aria-labelledby="dropdownMenu2">
                    <!--                     <button name="category" class="dropdown-item menuitemstyle" type="button">桌上型電腦</button> -->
                  
                </div>
			</div>

            
            <div class="btn-group">
                <button type="button" class="btn btn-secondary btnwidth">廠牌</button>
                <button name="becheckbtn" type="button" class="btn btn-secondary dropdown-toggle" data-toggle="modal" data-target="#mustchoose">
                    <span class="caret"></span>
                    <span class="sr-only">Toggle Dropdown</span>
                </button>
                <button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown">
                        <span class="caret"></span>
                        <span class="sr-only">Toggle Dropdown</span>
                    </button>
                <div class="dropdown-menu dropdown-menu-right menustyle" aria-labelledby="dropdownMenu2">
                    
                </div>


			<div class="btn-group">
				<button type="button" class="btn btn-secondary btnwidth">廠牌</button>
				<button name="becheckbtn" type="button"
					class="btn btn-secondary dropdown-toggle" data-toggle="modal"
					data-target="#mustchoose">
					<span class="caret"></span> <span class="sr-only">Toggle
						Dropdown</span>
				</button>
				<button type="button" class="btn btn-secondary dropdown-toggle"
					data-toggle="dropdown">
					<span class="caret"></span> <span class="sr-only">Toggle
						Dropdown</span>
				</button>
				<div id="brandbtn" class="dropdown-menu dropdown-menu-right menustyle" aria-labelledby="dropdownMenu2">

                </div>

			</div>
			<div class="btn-group">
				<button type="button" class="btn btn-secondary btnwidth">價格</button>
				<button name="becheckbtn" type="button" data-toggle="modal"
					data-target="#mustchoose" class="btn btn-secondary dropdown-toggle">
					<span class="caret"></span> <span class="sr-only">Toggle
						Dropdown</span>
				</button>
				<button type="button" class="btn btn-secondary dropdown-toggle"
					data-toggle="dropdown">
					<span class="caret"></span> <span class="sr-only">Toggle
						Dropdown</span>
				</button>
				 <div class="dropdown-menu dropdown-menu-right menustyle" aria-labelledby="dropdownMenu2">
                    <button id="pricebtn1" name="price" class="dropdown-item menuitemstyle" value="1" type="button">$5000↓</button>
                    <button id="pricebtn2" name="price" class="dropdown-item menuitemstyle" value="5000" type="button">$5000-$10000</button>
                    <button id="pricebtn3" name="price" class="dropdown-item menuitemstyle" value="10000" type="button">$10000-$15000</button>
                    <button id="pricebtn4" name="price" class="dropdown-item menuitemstyle" value="15000" type="button">$15000-$20000</button>
                    <button id="pricebtn5" name="price" class="dropdown-item menuitemstyle" value="20000" type="button">$20000↑</button>
                </div>
			</div>
			<div class="modal fade" id="mustchoose" tabindex="-1" role="dialog"
				aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
				<div class="modal-dialog modal-dialog-centered" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"
								aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<img src="image/exclamation-mark.png" width="80px">
							<h5 style="color: red">請選擇分類</h5>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary"
								data-dismiss="modal">OK</button>
						</div>
					</div>
				</div>
			</div>




		  <input id="searchspace" type="text" name="searchspace" style="line-height:45px;" size="30px">
            <button id="searchbtn" style="padding:0px 50px" type="button" class="btn btn-secondary btnwidth">
                搜尋
                <span>
                    <img src="image/loupe.png" width="20px;">
                </span>
            </button>
        </div>
		<!-- 以下是輪播牆 -->
        <div id="carouselExampleIndicatorsup" >
		
        
        </div>
        <!-- 以下是輪播牆 -->
        <div id="carouselExampleIndicatorsup"></div>

	</nav>
	<article>
			<h3 style="color:rgb(236, 215, 25);font-family:微軟正黑體;text-align:center;margin:20px 0px">推薦商品</h3>			
		<div class="forcard">
		</div>

	</article>
	<footer>
		<div style="background-color: #dad7cc;">
			<ul class="nav">
				<li class="nav-item"><a style="color: #6c757d"
					class="nav-link active" href="#">隱私權政策</a></li>
				<li class="nav-item"><a style="color: #6c757d" class="nav-link"
					href="#">購物流程</a></li>
				<li class="nav-item"><a style="color: #6c757d" class="nav-link"
					href="#">付款方式</a></li>
				<li class="nav-item"><a style="color: #6c757d" class="nav-link"
					href="#">會員權益</a></li>
				<li class="nav-item"><a style="color: #6c757d" class="nav-link"
					href="#">售後服務</a></li>
				<li class="nav-item"><a style="color: #6c757d" class="nav-link"
					href="#">網路客服</a></li>


			</ul>

		</div>
		<div
			style="background-color: #dad7cc; color: #6c757d; font-size: 10px; padding: 10px 60px">
			<a href=""> <img src="image/001.png" width="80px">
			</a>
			<p>欣亞數位股份有限公司 版權所有© Sinya Digital Corporation. All rights
				reserved.</p>
			<p>臺灣 807 高雄市三民區建國二路121號 網購客服專線(市話撥打)：0800-380-380
				網購客服專線(手機撥打)：02-23512801</p>
			<p>客服服務專線 服務時間：10:00 ~ 17:00</p>
		</div>

	</footer>
    

        <script src="js/login.js"></script><!--處理登入-->
		<script
		src="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.js"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
		integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
		crossorigin="anonymous"></script>
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"
		integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
		crossorigin="anonymous"></script>
	
<script type="text/javascript">
        $(document).ready(function () {
        	sessionStorage.category = "ini";
            sessionStorage.brand = "ini";
            sessionStorage.price = 0;
            sessionStorage.searchspace = "ini";
        	
        	
            $.get("SelectByCategory", function (data, status) {
                if (status == "success") {
                    var querydata = $.parseJSON(data);
                    $.each(querydata, function (index, json) {
                        $("#categorybtn").append("<button id='category" + json.code + "' name='category' class='dropdown-item menuitemstyle' type='button' value='"
                            + json.category + "'>" + json.category + "</button>");

                        document.getElementById("category" + json.code).addEventListener("click", clickcategory);

                    })

                    $('button.menuitemstyle').click(function () {
                        $(this).parent().siblings(".btnwidth").text($(this).text());
                    })
                    $('button[name="becheckbtn"]').next().hide();
                    $('button[name="category"]').click(function () {
                        $('button[name="becheckbtn"]').hide();
                        $('button[name="becheckbtn"]').next().show();
                    })
                    
                    
                    
                }
            })
            
           
            
            
            
            function clickcategory() {
                $('#brandtitle').text("廠牌");
                $('#pricetitle').text("價格");
                $('#brandbtn').empty();
                document.getElementById("pricebtn1").addEventListener("click",clickprice);
                document.getElementById("pricebtn2").addEventListener("click",clickprice);
                document.getElementById("pricebtn3").addEventListener("click",clickprice);
                document.getElementById("pricebtn4").addEventListener("click",clickprice);
                document.getElementById("pricebtn5").addEventListener("click",clickprice);
                
                sessionStorage.category = event.target.value;
             
                //      傳category給brand標籤去搜尋producttable
                $.post("SelectByBrand", { "category": sessionStorage.category }, function (data, status) {
                    if (status == "success") {
                        var querydata = $.parseJSON(data);
                        $.each(querydata, function (index, json) {
                            $("#brandbtn").append("<button id='" + json.brand + "'name='brand' class='dropdown-item menuitemstyle' type='button' value='"
                                + json.brand + "'>" + json.brand + "</button>");
                            document.getElementById(""+json.brand).addEventListener("click",clickbrand);
                            
           
                        })
                        $('button.menuitemstyle').click(function () {
                            $(this).parent().siblings(".btnwidth").text($(this).text());
                        })

                       
                    }
                })
                
                function clickbrand(){
                	sessionStorage.brand = event.target.value;
                }
                function clickprice(){
             	    sessionStorage.price = event.target.value;
                }


            }
        })
    </script>
<script type="text/javascript">
$(document).ready(function(){
    document.getElementById("searchspace").addEventListener("blur", storesearchspace);   //存
	document.getElementById("searchspace").addEventListener("focus", removesearchspace);  //清除

     function storesearchspace(){
         sessionStorage.searchspace = event.target.value;
//          alert(sessionStorage.searchspace);
     }	
     function removesearchspace(){
        sessionStorage.searchspace = "ini";
       //  alert(sessionStorage.searchspace);
     }
	
	
$("#searchbtn").click(function(){
	$.post("userInput",{"category":sessionStorage.category,
		                     "brand":sessionStorage.brand,
		                     "price":sessionStorage.price,
		                     "searchspace":sessionStorage.searchspace},  
		                     function(data,status){
		                    	 sessionStorage.data = data
// 		                    	 alert("要跳了 " + sessionStorage.data);
 		                    	 window.location.href="http://localhost:8081/FinalProject/ProductPage.html";
		                     }
			)
})
	
	
})

</script>	
		
</body>

</html>