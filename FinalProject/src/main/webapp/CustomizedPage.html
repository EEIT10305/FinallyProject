<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
	integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
	crossorigin="anonymous">
<link rel="stylesheet" href="css/fp.css">
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<!-- <script src="js/wall.js"></script> -->
<script src="js/basic.js"></script>
<title>客製化頁</title>
<style>
aside {
	float: left;
	width: 40%;
	margin: 10px;
	padding: 50px 10px;
}

article {
	float: left;
	width: 55%;
	margin: 10px;
}

.page-item.active .mypagestyle {
	z-index: 1;
	color: #fff;
	background-color: grey;
	border-color: grey;
}

.mypage-link {
	position: relative;
	display: block;
	padding: .5rem .75rem;
	margin-left: -1px;
	line-height: 1.25;
	color: grey;
	background-color: #fff;
	border: 1px solid #dee2e6;
}

.table .thead-mycolor th {
	color: #fff;
	background-color: grey;
	border-color: grey;
}

.table-mycolor {
	color: rgb(78, 72, 72);
	background-color: #dad7cc;
}

.infor {
	width: 18rem;
	padding: 20px;
	margin: 20px;
	z-index: 1;
	position: absolute;
	right: 10px;
	top: 10px;
	background: #fff;
	opacity: 0.9;
}

.custforcard {
	display: flex;
	flex-wrap: wrap;
	border: 1px solid #dad7cc;
	border-radius: 30px;
	margin: 50px;
	background: whitesmoke;
	padding: 30px 30px;
	align-content:flex-start;
}
</style>
<script>
	$(document).ready(function() {
		$(".card").children(":last-child").hide();
		$(".card").mouseenter(function() {
			$(this).children(":last-child").show();
			$(this).children(":last-child").append("111");
		}).mouseleave(function() {
			$(this).children(":last-child").hide();
		})

	})
</script>
</head>

<body>
	<header style="width: 100%">
		<div style="align-items: baseline;"
			class="d-flex justify-content-between">
			<div class="navv">
				<ul>
					<li><a href="FirstPage.html"> <img src="image/001.png"
							width="120px">
					</a></li>
				</ul>

            </div>
            <div class="navv">
                <a href="FirstPage.html">
                    <button type="button" class="btn btn-dark btnchoose">
                        <img src="image/shopping-bag.png" width="20px">
                        <br>線上購物
                    </button>
                </a>
                <button type="button" class="btn btn-dark btnchoose">
                    <img src="image/note.png" width="20px">
                    <br>自組電腦
                </button>
                <a href="Pk.html">
                    <button type="button" class="btn btn-dark btnchoose">
                        <img src="image/football-signal-of-a-game-announcement-of-one-team-vs-other_w.png" width="20px">
                        <br>商品比較
                    </button>
                </a>
            </div>
            <div class="navv">
               <ul>
					<li>
						<a id="test" href="/FinalProject/ShowCart.html">
						<img src="image/shopping-cart.png" width="30px"></a>
				<fieldset id="myModal" class="mymodal">
					<div class="dropdown-divider"></div>
					<a href='ShowCart.html'><button style="width: 300px"
							class='btn btn-dark'>查看購物車</button></a>
				</fieldset>
					</li>
					<li>
						<a href="" data-toggle="modal" data-target="#exampleModalCenter">
							<img src="image/avatar.png" width="30px">
						</a>

					</li>
				</ul>
			</div>
		</div>

		<!-- Modal -->
		<div class="modal fade" id="exampleModalCenter" tabindex="-1"
			role="dialog" aria-labelledby="exampleModalCenterTitle"
			aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLongTitle">Login登入</h5>
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<form>
						<div class="modal-body">
							<div class="form-group">
								<label for="exampleInputEmail1">Email</label> <input
									type="email" class="form-control" id="exampleInputEmail1"
									aria-describedby="emailHelp" placeholder="Enter email">
							</div>
							<div class="form-group">
								<label for="exampleInputPassword1">密碼</label> <input
									type="password" class="form-control" id="exampleInputPassword1"
									placeholder="Password">
							</div>
							<span> <a href="Register.html"> 尚未註冊?</a>
							</span> <br>
							<button id="gogogsubmit" class="mymodelbtn btn-dark">送出</button>
							<div class="form-check">
								<input type="checkbox" class="form-check-input"
									id="exampleCheck1"> <label class="form-check-label"
									for="exampleCheck1">記住密碼</label>
							</div>

							<div class="dropdown-divider"></div>
							<button type="reset" class="mymodelbtn btn-primary">fb登入</button>

						</div>
					</form>
				</div>
			</div>
		</div>

	</header>

	<nav>
		<!-- 以下是輪播牆 -->

		<div id="carouselExampleIndicatorsup"></div>
	</nav>
	<div style="overflow: auto; background-color: whitesmoke">
		<aside>
            <div style="text-align: center">
                <table class="table table-striped table-mycolor ">
                    <thead class="thead-mycolor">
                        <tr>
                            <th scope="col"></th>
                            <th scope="col">型號</th>
                            <th scope="col">價格</th>
                            <th scope="col"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">主機板</th>
                            <td>
                                <select id="showMB">
                                </select>
                            </td>
                            <td id="MBPrice"></td>
                            <td id="MBAmount"></td>
                        </tr>
                        <tr>
                            <th scope="row">CPU</th>
                            <td>
                                <select id="showCPU">
                                </select>
                            </td>
                            <td id="CPUPrice"></td>
                            <td id="CPUAmount"></td>
                        </tr>
                        <tr>
                            <th scope="row">記憶體</th>
                            <td>
                                <select id="showRAM">
                                </select>
                            </td>
                            <td id="RAMPrice"></td>
                            <td id="RAMAmount"></td>
                        </tr>
                        <tr>
                            <th scope="row">電源供應器</th>
                            <td>
                                <select id="showPOWERSUPPLIER">
                                </select>
                            </td>
                            <td id="POWERSUPPLIERPrice"></td>
                            <td id="POWERSUPPLIERAmount"></td>
                        </tr>
                        <tr>
                            <th scope="row">機殼</th>
                            <td>
                                <select id="showCABINET">
                                </select>
                            </td>
                            <td id="CABINETPrice"></td>
                            <td id="CABINETAmount"></td>
                        </tr>
                        <tr>
                            <th scope="row">顯示卡</th>
                            <td>
                                <select id="showVGA">
                                </select>
                            </td>
                            <td id="VGAPrice"></td>
                            <td id="VGAAmount"></td>
                        </tr>
                        <tr>
                            <th scope="row">硬碟</th>
                            <td>
                                <select id="showSTORAGE">
                                </select>
                            </td>
                            <td id="STORAGEPrice"></td>
                            <td id="STORAGEAmount"></td>
                        </tr>
                    </tbody>
                </table>
                <div style="height:120px;background-color: #dad7cc; border-radius: 10px">
                    <h4 style="line-height: 50px;">
                                                        電供
                        <span id="totalPower" style="color: red">  5  </span>瓦 總價
                        <span id="totalPrice" style="color: red">  20000  </span>元     
                        <br>
                       <a id="checkProductByCart" href="#" class="btn btn-danger">全部加入購物車 <img src="image/shopping-cart (1).png" width="20px"></a>
                         
                    </h4>
                </div>


			</div>
		</aside>
		<article>
			<div>
				<ul class="nav nav-tabs">
					<li class="nav-item"><a style="color: grey"
						class="nav-link active" href="#">商品</a></li>
					<li class="nav-item dropdown">
					<a id="Category" style="color: grey" class="nav-link dropdown-toggle"
						data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
						aria-expanded="false">分類</a>

						<div id="selectCategory" class="dropdown-menu"></div></li>
					<li class="nav-item dropdown"><a id="Brand"
						style="color: grey" class="nav-link dropdown-toggle"
						data-toggle="modal" href="#" data-target="#mustchoose" role="button" aria-haspopup="true"
						aria-expanded="false">廠牌</a>
						<div id="selectBrand" class="dropdown-menu">
							<!-- 新增的選項 -->
						</div></li>
					<li class="nav-item dropdown"><a id="Price"
						style="color: grey" class="nav-link dropdown-toggle"
						data-toggle="modal" data-target="#mustchoose2" href="#" role="button" aria-haspopup="true"
						aria-expanded="false">價格</a>
						<div id="selectPrice" class="dropdown-menu">
							<!-- 新增的選項 -->
						</div></li>

				</ul>
			</div>
<!-- 	----------------------------		modal---------------------------------------->
			<div class="modal fade" id="mustchoose" tabindex="-1" role="dialog"
				aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
				<div class="modal-dialog modal-dialog-centered" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"
								aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div style="margin:0px auto" class="modal-body">
							<img src="image/exclamation-mark.png" width="80px">
							<h5 style="color: red">請選擇分類</h5>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary"
								data-dismiss="modal">OK</button>
						</div>
					</div>
				</div>
			</div>
<!-- 	----------------------------		modal2---------------------------------------->
			<div class="modal fade" id="mustchoose2" tabindex="-1" role="dialog"
				aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
				<div class="modal-dialog modal-dialog-centered" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"
								aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div style="margin:0px auto" class="modal-body">
							<img src="image/exclamation-mark.png" width="80px">
							<h5 style="color: red">請選擇廠牌</h5>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary"
								data-dismiss="modal">OK</button>
						</div>
					</div>
				</div>
			</div>
			

			<div id="selectPingin">

            </div>
            <!-- 頁面跳轉按鈕 -->
            <div style="margin: 50px;" aria-label="Page navigation example">
                <ul id="pagebtn" class="pagination justify-content-center">
                    
<!--                     <li class="page-item active"> -->
<!--                         <a class="mypage-link mypagestyle" href="#">1 -->
<!--                             <span class="sr-only">(current)</span> -->
<!--                         </a> -->
<!--                     </li> -->
<!--                     <li class="page-item"> -->
<!--                         <a class="mypage-link" href="#">2</a> -->
<!--                     </li> -->
<!--                     <li class="page-item"> -->
<!--                         <a class="mypage-link" href="#">3</a> -->
<!--                     </li> -->
                    
                </ul>
            </div>
        </article>
    </div>
    <footer>
        <div style="background-color: #dad7cc;">
            <ul class="nav">
                <li class="nav-item">
                    <a style="color: #6c757d" class="nav-link active" href="#">隱私權政策</a>
                </li>
                <li class="nav-item">
                    <a style="color: #6c757d" class="nav-link" href="#">購物流程</a>
                </li>
                <li class="nav-item">
                    <a style="color: #6c757d" class="nav-link" href="#">付款方式</a>
                </li>
                <li class="nav-item">
                    <a style="color: #6c757d" class="nav-link" href="#">會員權益</a>
                </li>
                <li class="nav-item">
                    <a style="color: #6c757d" class="nav-link" href="#">售後服務</a>
                </li>
                <li class="nav-item">
                    <a style="color: #6c757d" class="nav-link" href="#">網路客服</a>
                </li>

            </ul>

        </div>
        <div style="background-color: #dad7cc; color: #6c757d; font-size: 10px; padding: 10px 60px">
            <a href="">
                <img src="image/001.png" width="80px">
            </a>
            <p>大選電腦股份有限公司　版權所有© BigVote Digital Corporation. All rights reserved.</p>
            <p>臺灣  臺北市信義區市府路1號 ·  　網購客服專線(市話撥打)：02 2720 8889　網購客服專線(手機撥打)：1999</p>
            <p>客服服務專線 服務時間：10:00 ~ 17:00</p>
        </div>

    </footer>
    <script src="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
        crossorigin="anonymous"></script>

    <script type="text/javascript">
        $(document).ready(
                function(){
                	selectAllProduct()
                	$("#checkProductByCart").click(returnPageToCart)
                    $.get("selectCategoryForCustomized",
                            function (data, status) {
                    						initmb()
                                if (status == "success") {
                                    var querydata = $.parseJSON(data);
                                    $.each(querydata,function (index,json) {
                                                $("#selectCategory").append("<a class='dropdown-item'  value='" + json.category + "'>"+ json.category+ "</a>");
                                            })

                                    $("#selectCategory a").click(checkCategory)

                                    document.getElementById("showMB").addEventListener("change",checkMb)
 
                                }
                            })
                            
                    $.get("showAllProductImg", function (
                    data, status) {
                    if (status == "success") {
                        var querydata = $.parseJSON(data);
                        var total=0;
                        var count=0;
                        var showamount=4;
                        $("#pagebtn").html("")
                        $.each(querydata, function (index, json) {
                        	if(index%4==0){
								count++
                        		$("#selectPingin").append("<div id='pg"+count+"' class='custforcard'></div>")
                        	}
                        		$("#pg"+count).append('<div class="card" style="width: 15rem; padding: 10px;">'+
         							"<img value='"+json.name+"' class='card-img-top' src='image/"+json.name+".png' width='100px' height='220px' alt='Card image cap'>"+
         							"<div class='card-body'>"+
         							"<h5 class='card-title'>"+json.name+"</h5>"+
         							"<h5 class='card-title' style='color: red'>$"+json.price+"</h5></div>"+
        							"<div  class='infor'></div></div>"
         							);
                        	total++
                        })
                       	page = Math.ceil(total/showamount);
                        
                        for(var a=1; a<=page; a++){
                        $("#pagebtn").append(
                    			   '<li class="page-item"><a  id="changepagebtn'+ a +'" class="mypage-link" >'+ a +'</a></li>'	   
                    	   )        	   
                    	   $("#pg"+a).hide();
                        }
                        $("#pg1").show();
                        $("#changepagebtn1").parent().attr("class", "page-item active");
                        $("#changepagebtn1").attr("class", "mypage-link mypagestyle"); 
                        for(var x=1;x<=page;x++){
                        	document.getElementById("changepagebtn"+x).addEventListener("click",turnpage) 
                        }
                        
                        
                        $(".card").children(":last-child").hide();
                        $(".card").mouseenter(function () {
						$.post("showPinginDetailByImage",{"Pinginmodel":$(this).children().attr("value")},function(data,status){
		                 		if (status == "success") {
		                        var querydata = $.parseJSON(data);
		                        $.each(querydata,function (index,json) {
		                        	if(json.category=="主機板"){
		                            	$(".card").children(":last-child").append("主機板:"+json.model+"<br>");
		                               }
		                            if(json.category=="cpu"){
		                            	$(".card").children(":last-child").append("CPU:"+json.model+"<br>");
		                               }
		                            if(json.category=="記憶體"){
		                                $(".card").children(":last-child").append("記憶體:"+json.model+"<br>");
		                               }
		                             if(json.category=="電源供應器"){
		                                $(".card").children(":last-child").append("電源供應器:"+json.model+"<br>");
		                               }
		                             if(json.category=="機殼"){
		                                $(".card").children(":last-child").append("機殼:"+json.model+"<br>");
		                               }
		                             if(json.category=="顯示卡"){
		                                $(".card").children(":last-child").append("顯示卡:"+json.model+"<br>");
		                               }
		                             if(json.category=="硬碟"){
		                                $(".card").children(":last-child").append("硬碟:"+json.model+"<br>");
		                               }
		                            })
		                           }
		                                                                		 
		                          })
		                            
									$(this).children(":last-child").show();
									}).mouseleave(function () {
									$(".card").children(":last-child").html("");
									$(this).children(":last-child").hide();
								})
                        $("div.card").click(showPingin)
                    }
                })
                	   $("#totalPrice").html("")
                	   $("#totalPrice").html(parseInt($("#CPUPrice").html())+
			                			     parseInt($("#RAMPrice").html())+
			                			     parseInt($("#MBPrice").html())+
			                			     parseInt($("#VGAPrice").html())+
			                			     parseInt($("#STORAGEPrice").html())+
			                			     parseInt($("#CABINETPrice").html())+
			                			     parseInt($("#POWERSUPPLIERPrice").html()))
                		
			            $("#showCPU").change(showCpuPrice)
                		$("#showRAM").change(showRamPrice)
                		$("#showVGA").change(showVgaPrice)
                		$("#showCABINET").change(showCabinetPrice)
                		$("#showPOWERSUPPLIER").change(showPowerSupplierPrice)
                		$("#showSTORAGE").change(showStoragePrice)
           })
           
      function showCpuPrice(){
        	$.post("showCpuPower",{"Cpumodel":$(this).find("option:selected").text()},function (data, status) {
				if (status == "success") {
						var querydata = $.parseJSON(data);
				                $("#CPUPrice").html(querydata.price)
				    }
        	CalculateTotalPrice();
				});
        	CalculateTotalPower();
        	PowerSupplierByTotalPower();
        }
      function showRamPrice(){
    	  $.post("showRamPower",{"Rammodel":$(this).find("option:selected").text()},function (data, status) {
				if (status == "success") {
						var querydata = $.parseJSON(data);
				                $("#RAMPrice").html(querydata.price)
				    }
    	  CalculateTotalPrice();
				});
    	  CalculateTotalPower();
    	  PowerSupplierByTotalPower();
        }
	  function showVgaPrice(){
		  $.post("showVgaPower",{"Vgamodel":$(this).find("option:selected").text()},function (data, status) {
				if (status == "success") {
						var querydata = $.parseJSON(data);
				                $("#VGAPrice").html(querydata.price)
				    }
		  CalculateTotalPrice();
				});
		  CalculateTotalPower();
		  PowerSupplierByTotalPower();
        }
	  function showCabinetPrice(){
			$.post("showCabinetPower",{"Cabinetmodel":$(this).find("option:selected").text()},function (data, status) {
				if (status == "success") {
						var querydata = $.parseJSON(data);
				                $("#CABINETPrice").html(querydata.price)
				    }
			CalculateTotalPrice();
				});
			CalculateTotalPower();
			PowerSupplierByTotalPower();
    	}
	  function showPowerSupplierPrice(){
	   		$.post("showInitPrice",{"model":$(this).find("option:selected").text()},function (data, status) {
				
	   			if (status == "success") {
						var querydata = $.parseJSON(data);
				                $("#POWERSUPPLIERPrice").html(querydata.price)
				    }
			CalculateTotalPrice();
				});
	   		CalculateTotalPower();
		}
	  function showStoragePrice(){
			$.post("showStoragePower",{"Storagemodel":$(this).find("option:selected").text()},function (data, status) {
				if (status == "success") {
						var querydata = $.parseJSON(data);
				                $("#STORAGEPrice").html(querydata.price)
				    }
			CalculateTotalPrice();
				});
			CalculateTotalPower();
			PowerSupplierByTotalPower();
		}
      
      function initmb(){
        	 $.post("checkRamForCustomized",{"Mbmodel": sessionStorage.initmbmodel},function (data, status) {
                 if (status == "success") {
                     $("#showRAM").html("");
                         var querydata = $.parseJSON(data);
                         $.each(querydata,function (index,json) {
	                        	 if(index==0){
	                         		sessionStorage.rammodel=json.model
	                         		$("#RAMPrice").html(json.price)
	                     		}
                                 $("#showRAM").append("<option value='"+json.psu+"' name='"+json.model+"'>"+ json.model+ "</option>");
                                 })
            	 CalculateTotalPrice();
                     }
                 CalculateTotalPower();
                 PowerSupplierByTotalPower();
                 });
         $.post("checkCpuForCustomized",{"Mbmodel": sessionStorage.initmbmodel},
                 function (data, status) {
                     if (status == "success") {
                         $("#showCPU").html("");
                         var querydata = $.parseJSON(data);
                         $.each(querydata,function (index,json) {
                        	 if(index==0){
	                         		sessionStorage.cpumodel=json.model
	                         		$("#CPUPrice").html(json.price)
	                     		}
                                 $("#showCPU").append("<option value='"+json.psu+"' name='"+json.model+"'>"+ json.model+ "</option>");
                             })

        	 CalculateTotalPrice();
                     }
        	 CalculateTotalPower();	
        	 PowerSupplierByTotalPower();
                 });
         
        }
       
                 
      function selectAllProduct(){
    	  
        	$.get("SelectMbForCustomized", function (data,
                    status) {
                    if (status == "success") {
                        var querydata = $.parseJSON(data);
                        $.each(querydata, function (index, json) {
                            if(json.model!=sessionStorage.mbmodel){
                            	if(index==0){
                            		sessionStorage.initmbmodel=json.model
                            		$("#MBPrice").html(json.price)
                            	}
                        	$("#showMB").append("<option value='"+json.psu+"' name='"+json.model+"'>" + json.model+ "</option>");
                        	
                        	}
                        })
                    }
                })
                $.get("SelectCpuForCustomized", function (data,
                    status) {
                    if (status == "success") {
                        var querydata = $.parseJSON(data);
                        $.each(querydata, function (index, json) {
                        	if(json.model!=sessionStorage.cpumodel){
                        		if(index==0){
                            		sessionStorage.initcpumodel=json.model
                            	}
                            $("#showCPU").append("<option value='"+json.psu+"' name='"+json.model+"'>" + json.model+ "</option>");
                        	}
                        })

                    }
                })
                $.get("selectRamForCustomized", function (data,
                    status) {
                    if (status == "success") {
                        var querydata = $.parseJSON(data);
                        $.each(querydata, function (index, json) {
                        	if(json.model!=sessionStorage.rammodel){
                        		if(index==0){
                            		sessionStorage.initrammodel=json.model
                            	}
                            $("#showRAM").append("<option value='"+json.psu+"' name='"+json.model+"'>" + json.model+ "</option>");
                        	}
                        })

                    }
                })
                $.get("selectVgaForCustomized", function (data,
                    status) {
                    if (status == "success") {
                        var querydata = $.parseJSON(data);
                        $.each(querydata, function (index, json) {
                        	if(json.model!=sessionStorage.vgamodel){
                        		if(index==0){
                            		sessionStorage.initvgamodel=json.model
                            		$("#VGAPrice").html(json.price)
                            	}
                            $("#showVGA").append("<option value='"+json.psu+"' name='"+json.model+"'>" + json.model+ "</option>");
                        	}
                        })

                    }
                })
                $.get("selectStorageForCustomized", function (data,
                    status) {
                    if (status == "success") {
                        var querydata = $.parseJSON(data);
                        $.each(querydata, function (index, json) {
                        	if(json.model!=sessionStorage.storagemodel){
                        		if(index==0){
                            		sessionStorage.initstoragemodel=json.model
                            		$("#STORAGEPrice").html(json.price)
                            	}
                            $("#showSTORAGE").append("<option value='"+json.psu+"' name='"+json.model+"'>" + json.model+ "</option>");
                        	}
                        })

                    }
                })
                $.get("selectCabinetForCustomized", function (data,
                    status) {
                    if (status == "success") {
                        var querydata = $.parseJSON(data);
                        $.each(querydata, function (index, json) {
                        	if(json.model!=sessionStorage.cabinetmodel){
                        		if(index==0){
                            		sessionStorage.initcabinetmodel=json.model
                            		$("#CABINETPrice").html(json.price)
                            	}
                            $("#showCABINET").append("<option value='"+json.psu+"' name='"+json.model+"'>" + json.model+ "</option>");
                        	}
                        })

                    }
                })
                $.get("selectPowerSupplierForCustomized", function (
                    data, status) {
                    if (status == "success") {
                        var querydata = $.parseJSON(data);
                        $.each(querydata, function (index, json) {
                        	if(json.model!=sessionStorage.powersuppliermodel){
                        		if(index==0){
                            		sessionStorage.initpowersuppliermodel=json.model
                            		$("#POWERSUPPLIERPrice").html(json.price)
                            	}
                        	
                            $("#showPOWERSUPPLIER").append("<option value='"+json.psu+"' name='"+json.model+"'>" + json.model+ "</option>");
                        	}
                        })

                    }
                })
                CalculateTotalPower();
        	}
                 
                 function checkCategory() {
                    $("#Brand").attr("data-toggle","dropdown")
         			$("#Brand").attr("data-target","")
                                    	if($("#Category").html()!=$(this).html()){
                                        $("#Category").html($(this).html());
                                        $("#Brand").html("廠牌");
                                        $("#Price").html("價格");
                                    	}
                                        $.post("selectBrandForCustomized",{"Brandmodel": $("#Category").html()},function (data,status) {
                                                    
                                            if (status == "success") {
                                                    $("#selectBrand").html("");
                                                        var querydata = $.parseJSON(data);
                                                        $.each(querydata,function (index,json) {
                                                                $("#selectBrand").append("<a class='dropdown-item' value='" + json.brand + "'>"+ json.brand+ "</a>");
                                                                })
                                                        $("#selectBrand a").click(checkBrand)
                                                    }
                                                });
                                    }
                 
                 function checkBrand() {
                	 $("#Price").attr("data-toggle","dropdown")
          			$("#Price").attr("data-target","")
                                    	if($("#Brand").html()!=$(this).html()){
                                    		$("#selectPrice").html("");
                                        	$("#Brand").html($(this).html());
                                        	$("#selectPrice").append(
                                                  "<a class='dropdown-item'  value='25000'>25000至30000</a>"
                                                + "<a class='dropdown-item'  value='30000'>30000至35000</a>"
                                                + "<a class='dropdown-item'  value='35000'>35000至40000</a>"
                                                );
                                    	}
                                    	 $.post("showProductByCategoryForCustomized",{"Categorymodel": $("#Category").html(),"Brandmodel": $("#Brand").html()},function (data,status) {
                                             
                                             if (status == "success") {
                                                         var querydata = $.parseJSON(data);
                                                         var total=0;
                                                         var count=0;
                                                         var showamount=4;
                                                         $("#pagebtn").html("")
                                                        		 $("#selectPingin").html("");
                                                        		 $.each(querydata, function (index, json) {
                                                                 	if(index%4==0){
                                         								count++
                                                                 		$("#selectPingin").append("<div id='pg"+count+"' class='custforcard'></div>")
                                                                 		
                                                                 	}
                                                                 		$("#pg"+count).append('<div class="card" style="width: 15rem; padding: 10px;">'+
                                                  							"<img value='"+json.name+"' class='card-img-top' src='image/"+json.name+".png' width='100px' height='220px' alt='Card image cap'>"+
                                                  							"<div class='card-body'>"+
                                                  							"<h5 class='card-title'>"+json.name+"</h5>"+
                                                  							"<h5 class='card-title' style='color: red'>$"+json.price+"</h5></div>"+
                                                 							"<div  class='infor'></div></div>"
                                                  							);
                                                                 		total++
                                                                 })
                                                                 page = Math.ceil(total/showamount);
                                                                 
                                                                 for(var a=1; a<=page; a++){
                                                                 $("#pagebtn").append(
                                                             			   '<li class="page-item"><a  id="changepagebtn'+ a +'" class="mypage-link" >'+ a +'</a></li>'	   
                                                             	   )        	   
                                                             	   $("#pg"+a).hide();
                                                                 }
                                                                 $("#pg1").show();
                                                                 $("#changepagebtn1").parent().attr("class", "page-item active");
                                                                 $("#changepagebtn1").attr("class", "mypage-link mypagestyle"); 
                                                                 for(var x=1;x<=page;x++){
                                                                 	document.getElementById("changepagebtn"+x).addEventListener("click",turnpage) 
                                                                 }
                                                                	 	$(".card").children(":last-child").hide();
															             $(".card").mouseenter(function () {
															            	 $.post("showPinginDetailByImage",{"Pinginmodel":$(this).children().attr("value")},function(data,status){
		                                                                		 if (status == "success") {
		                                                                                 var querydata = $.parseJSON(data);
		                                                                                 $.each(querydata,function (index,json) {
		                                                                                         if(json.category=="主機板"){
		                                                                                        	 $(".card").children(":last-child").append("主機板:"+json.model+"<br>");
		                                                                                         }
		                                                                                         if(json.category=="cpu"){
		                                                                                        	 $(".card").children(":last-child").append("CPU:"+json.model+"<br>");
		                                                                                         }
		                                                                                         if(json.category=="記憶體"){
		                                                                                        	 $(".card").children(":last-child").append("記憶體:"+json.model+"<br>");
		                                                                                         }
		                                                                                         if(json.category=="電源供應器"){
		                                                                                        	 $(".card").children(":last-child").append("電源供應器:"+json.model+"<br>");
		                                                                                         }
		                                                                                         if(json.category=="機殼"){
		                                                                                        	 $(".card").children(":last-child").append("機殼:"+json.model+"<br>");
		                                                                                         }
		                                                                                         if(json.category=="顯示卡"){
		                                                                                        	 $(".card").children(":last-child").append("顯示卡:"+json.model+"<br>");
		                                                                                         }
		                                                                                         if(json.category=="硬碟"){
		                                                                                        	 $(".card").children(":last-child").append("硬碟:"+json.model+"<br>");
		                                                                                        	
		                                                                                         }
		                                                                                         })
		                                                                             }
		                                                                		 
		                                                                	 })
															                 $(this).children(":last-child").show();
															             }).mouseleave(function () {
															            	 $(".card").children(":last-child").html("");
															                 $(this).children(":last-child").hide();
															             })
                                                                		 $("div.card").click(showPingin)
                                                    			 }
                                                 });
                                        $("#selectPrice a").click(checkPrice)
                                    }
			        function checkPrice(){
			        	$("#Price").html($(this).html());
			        	$("#Price").attr("value",$(this).attr("value"));
			                
			        	$.post("showProductByPrice",{"Categorymodel": $("#Category").html(),"Brandmodel": $("#Brand").html(),"Pricemodel":$("#Price").attr("value")},function (data,status) {
			                if (status == "success") {
			                            var querydata = $.parseJSON(data);
			                            var total=0;
                                        var count=0;
                                        var showamount=4;
                                        $("#pagebtn").html("")
                                       		 $("#selectPingin").html("");
                                       		 $.each(querydata, function (index, json) {
                                                	if(index%4==0){
                        								count++
                                                		$("#selectPingin").append("<div id='pg"+count+"' class='custforcard'></div>")
                                                		
                                                	}
                                                		$("#pg"+count).append('<div class="card" style="width: 15rem; padding: 10px;">'+
                                 							"<img value='"+json.name+"' class='card-img-top' src='image/"+json.name+".png' width='100px' height='220px' alt='Card image cap'>"+
                                 							"<div class='card-body'>"+
                                 							"<h5 class='card-title'>"+json.name+"</h5>"+
                                 							"<h5 class='card-title' style='color: red'>$"+json.price+"</h5></div>"+
                                							"<div  class='infor'></div></div>"
                                 							);
                                                		total++
                                                })
                                                page = Math.ceil(total/showamount);
                                                a = 0;
                                                for(var a=1; a<=page; a++){
                                                $("#pagebtn").append(
                                            			   '<li class="page-item"><a  id="changepagebtn'+ a +'" class="mypage-link" >'+ a +'</a></li>'	   
                                            	   )        	   
                                            	   $("#pg"+a).hide();
                                                }
                                                $("#pg1").show();
                                                $("#changepagebtn1").parent().attr("class", "page-item active");
                                                $("#changepagebtn1").attr("class", "mypage-link mypagestyle"); 
                                                for(var x=1;x<=page;x++){
                                                	document.getElementById("changepagebtn"+x).addEventListener("click",turnpage) 
                                                }
			                                   		 $(".card").children(":last-child").hide();
													 $(".card").mouseenter(function () {
															$.post("showPinginDetailByImage",{"Pinginmodel":$(this).children().attr("value")},function(data,status){
				                                           		 if (status == "success") {
				                                                            var querydata = $.parseJSON(data);
				                                                            $.each(querydata,function (index,json) {
				                                                                    if(json.category=="主機板"){
				                                                                    	$(".card").children(":last-child").append("主機板:"+json.model+"<br>");
				                                                                    }
				                                                                    if(json.category=="cpu"){
				                                                                    	$(".card").children(":last-child").append("CPU:"+json.model+"<br>");
				                                                                    }
				                                                                    if(json.category=="記憶體"){
				                                                                    	$(".card").children(":last-child").append("記憶體	:"+json.model+"<br>");
				                                                                    }
				                                                                    if(json.category=="電源供應器"){
				                                                                    	$(".card").children(":last-child").append("電源供應器:"+json.model+"<br>");
				                                                                    }
				                                                                    if(json.category=="機殼"){
				                                                                    	$(".card").children(":last-child").append("機殼:"+json.model+"<br>");
				                                                                    }
				                                                                    if(json.category=="顯示卡"){
				                                                                    	$(".card").children(":last-child").append("顯示卡:"+json.model+"<br>");
				                                                                    }
				                                                                    if(json.category=="硬碟"){
				                                                                    	$(".card").children(":last-child").append("硬碟:"+json.model+"<br>");
				                                                                    }
				                                                                    })
				                                                        }
				                                           		 
				                                           	 })
													 $(this).children(":last-child").show();
													 }).mouseleave(function () {
														 $(".card").children(":last-child").html("");
													 $(this).children(":last-child").hide();
													 })
			                                   		 $("div.card").click(showPingin)
			                       			 }
			                    });
			        }
        
                 function showPingin(){
                    	$.post("showPinginDetailByImage",{"Pinginmodel":$(this).children().attr("value")},function (data, status) {

                            if (status == "success") {
                                    var querydata = $.parseJSON(data);
                                    $.each(querydata,function (index,json) {
                                            if(json.category=="主機板"){
                                            	$("#showMB").html("")
                                            	sessionStorage.mbmodel=json.model
                                            	$("#MBPrice").html(json.price)
                                            	$("#showMB").append("<option value='"+json.psu+"'>"+ json.model+"</option>");
                                            }
                                            if(json.category=="cpu"){
                                            	$("#showCPU").html("")
                                            	sessionStorage.cpumodel=json.model
                                            	sessionStorage.cpupsu=json.psu
                                            	$("#CPUPrice").html(json.price)
                                            	$("#showCPU").append("<option value='"+json.psu+"'>"+ json.model+"</option>");
                                            }
                                            if(json.category=="記憶體"){
                                            	$("#showRAM").html("")
                                            	sessionStorage.rammodel=json.model
                                            	sessionStorage.rampsu=json.psu
                                            	$("#RAMPrice").html(json.price)
                                            	$("#showRAM").append("<option value='"+json.psu+"'>"+ json.model+"</option>");
                                            }
                                            if(json.category=="電源供應器"){
                                            	$("#showPOWERSUPPLIER").html("")
                                            	sessionStorage.powersuppliermodel=json.model
                                            	$("#POWERSUPPLIERPrice").html(json.price)
                                            	$("#showPOWERSUPPLIER").append("<option value='"+json.psu+"'>"+ json.model+"</option>");
                                            }
                                            if(json.category=="機殼"){
                                            	$("#showCABINET").html("")
                                            	sessionStorage.cabinetmodel=json.model
                                            	$("#CABINETPrice").html(json.price)
                                            	$("#showCABINET").append("<option value='"+json.psu+"'>"+ json.model+"</option>");
                                            }
                                            if(json.category=="顯示卡"){
                                            	$("#showVGA").html("")
                                            	sessionStorage.vgamodel=json.model
                                            	$("#VGAPrice").html(json.price)
                                            	$("#showVGA").append("<option value='"+json.psu+"'>"+ json.model+"</option>");
                                            }
                                            if(json.category=="硬碟"){
                                            	$("#showSTORAGE").html("")
                                            	sessionStorage.storagemodel=json.model
                                            	$("#STORAGEPrice").html(json.price)
                                            	$("#showSTORAGE").append("<option value='"+json.psu+"'>"+ json.model+"</option>");
                                            }
                                            })
                                            CalculateTotalPrice();
                                            CalculateTotalPower();
                                            selectAllProductByImg();
                                    		checkMbByImg();
                                    		PowerSupplierByTotalPower();
                                }
                            });
                    	
                    }
                 
                    
                    
                    function checkMb() {

						sessionStorage.Mb = $(this).find("option:selected").text();
                        $.post("checkRamForCustomized",{"Mbmodel":sessionStorage.Mb},function (data, status) {
                                if (status == "success") {
                                    $("#showRAM").html("");
                                        var querydata = $.parseJSON(data);
                                        $.each(querydata,function (index,json) {
                                        		if(index==0){
                                        			sessionStorage.RamPrice=json.price
                                        			$("#RAMPrice").html(json.price)
                                        			$("#totalPrice").html("")
							                	    $("#totalPrice").html(parseInt(sessionStorage.CpuPrice)+
										                	 		      parseInt(sessionStorage.RamPrice)+
										                			      parseInt(sessionStorage.MbPrice)+
										                			      parseInt($("#VGAPrice").html())+
										                			      parseInt($("#STORAGEPrice").html())+
										                			      parseInt($("#CABINETPrice").html())+
										                			      parseInt($("#POWERSUPPLIERPrice").html()))
                                        		}
                                                $("#showRAM").append("<option value='"+json.psu+"' name='"+json.model+"'>"+ json.model+ "</option>");
                                                })
                                    }
                                CalculateTotalPower();
                                PowerSupplierByTotalPower();
                                });
                        $.post("checkCpuForCustomized",{"Mbmodel":sessionStorage.Mb},
                                function (data, status) {
                                    if (status == "success") {
                                        $("#showCPU").html("");
                                        var querydata = $.parseJSON(data);
                                        $.each(querydata,function (index,json) {
                                        	if(index==0){
                                        		sessionStorage.CpuPrice=json.price
                                        		$("#CPUPrice").html(json.price)
                                        		$("#totalPrice").html("")
						                	    $("#totalPrice").html(parseInt(sessionStorage.CpuPrice)+
									                	 		      parseInt(sessionStorage.RamPrice)+
									                			      parseInt(sessionStorage.MbPrice)+
									                			      parseInt($("#VGAPrice").html())+
									                			      parseInt($("#STORAGEPrice").html())+
									                			      parseInt($("#CABINETPrice").html())+
									                			      parseInt($("#POWERSUPPLIERPrice").html()))
                                    		}
                                                $("#showCPU").append("<option value='"+json.psu+"' name='"+json.model+"'>"+ json.model+ "</option>");
                                            })
	
                                    }
                                CalculateTotalPower();
                                PowerSupplierByTotalPower();
                                    
                                });
                        $.post("showInitPrice",{"model":sessionStorage.Mb},function (data, status) {
        					if (status == "success") {
        							var querydata = $.parseJSON(data);
        							sessionStorage.MbPrice=querydata.price
        					                $("#MBPrice").html(querydata.price)
        					                $("#totalPrice").html("")
							                $("#totalPrice").html(parseInt(sessionStorage.CpuPrice)+
										                	 	  parseInt(sessionStorage.RamPrice)+
										                	      parseInt(sessionStorage.MbPrice)+
										               		      parseInt($("#VGAPrice").html())+
										            		      parseInt($("#STORAGEPrice").html())+
										               		      parseInt($("#CABINETPrice").html())+
										               		      parseInt($("#POWERSUPPLIERPrice").html()))
        					    }       
        					});
			              }
                    function checkMbByImg() {
                        $.post("checkRamForCustomized",{"Mbmodel": sessionStorage.mbmodel},function (data, status) {
                                if (status == "success") {
                                    $("#showRAM").html("<option value='"+sessionStorage.rampsu+"' name='"+sessionStorage.rammodel+"'>"+ sessionStorage.rammodel+ "</option>");
                                        var querydata = $.parseJSON(data);
                                        $.each(querydata,function (index,json) {
		                                        if(sessionStorage.rammodel!=json.model){		                                        	
                                                $("#showRAM").append("<option value='"+json.psu+"' name='"+json.model+"'>"+ json.model+ "</option>");
		                                        }
                                                })
                                    }
                                });
                        $.post("checkCpuForCustomized",{"Mbmodel":sessionStorage.mbmodel},
                                function (data, status) {
                                    if (status == "success") {
                                        $("#showCPU").html("<option value='"+sessionStorage.cpupsu+"' name='"+sessionStorage.cpumodel+"'>"+ sessionStorage.cpumodel+ "</option>");
                                        var querydata = $.parseJSON(data);
                                        $.each(querydata,function (index,json) {
                                        	if(sessionStorage.cpumodel!=json.model){
                                                $("#showCPU").append("<option value='"+json.psu+"' name='"+json.model+"'>"+ json.model+ "</option>");
                                        	}
                                        	})

                                    }
                                });
                    }
                    function selectAllProductByImg(){
                    	$.get("SelectMbForCustomized", function (data,
                                status) {
                                if (status == "success") {
                                    var querydata = $.parseJSON(data);
                                    $.each(querydata, function (index, json) {
                                        if(json.model!=sessionStorage.mbmodel){
                                        	if(index==0){
                                        		sessionStorage.initmbmodel=json.model
                                        	}
                                    	$("#showMB").append("<option value='"+json.psu+"' name='"+json.model+"'>" + json.model+ "</option>");
                                    	
                                    	}
                                    })
                                }
                            })
                            $.get("SelectCpuForCustomized", function (data,
                                status) {
                                if (status == "success") {
                                    var querydata = $.parseJSON(data);
                                    $.each(querydata, function (index, json) {
                                    	if(json.model!=sessionStorage.cpumodel){
                                    		if(index==0){
                                        		sessionStorage.initcpumodel=json.model
                                        	}
                                        $("#showCPU").append("<option value='"+json.psu+"' name='"+json.model+"'>" + json.model+ "</option>");
                                    	}
                                    })

                                }
                            })
                            $.get("selectRamForCustomized", function (data,
                                status) {
                                if (status == "success") {
                                    var querydata = $.parseJSON(data);
                                    $.each(querydata, function (index, json) {
                                    	if(json.model!=sessionStorage.rammodel){
                                    		if(index==0){
                                        		sessionStorage.initrammodel=json.model
                                        	}
                                        $("#showRAM").append("<option value='"+json.psu+"' name='"+json.model+"'>" + json.model+ "</option>");
                                    	}
                                    })

                                }
                            })
                            $.get("selectVgaForCustomized", function (data,
                                status) {
                                if (status == "success") {
                                    var querydata = $.parseJSON(data);
                                    $.each(querydata, function (index, json) {
                                    	if(json.model!=sessionStorage.vgamodel){
                                    		if(index==0){
                                        		sessionStorage.initvgamodel=json.model
                                        	}
                                        $("#showVGA").append("<option value='"+json.psu+"' name='"+json.model+"'>" + json.model+ "</option>");
                                    	}
                                    })

                                }
                            })
                            $.get("selectStorageForCustomized", function (data,
                                status) {
                                if (status == "success") {
                                    var querydata = $.parseJSON(data);
                                    $.each(querydata, function (index, json) {
                                    	if(json.model!=sessionStorage.storagemodel){
                                    		if(index==0){
                                        		sessionStorage.initstoragemodel=json.model
                                        	}
                                        $("#showSTORAGE").append("<option value='"+json.psu+"' name='"+json.model+"'>" + json.model+ "</option>");
                                    	}
                                    })

                                }
                            })
                            $.get("selectCabinetForCustomized", function (data,
                                status) {
                                if (status == "success") {
                                    var querydata = $.parseJSON(data);
                                    $.each(querydata, function (index, json) {
                                    	if(json.model!=sessionStorage.cabinetmodel){
                                    		if(index==0){
                                        		sessionStorage.initcabinetmodel=json.model
                                        	}
                                        $("#showCABINET").append("<option value='"+json.psu+"' name='"+json.model+"'>" + json.model + "</option>");
                                    	}
                                    })

                                }
                            })

                            CalculateTotalPower();
                    	}
                   function CalculateTotalPower(){
                	    $("#totalPower").html("")
						$("#totalPower").html(parseInt($("#showMB").val())+
				   			   				  parseInt($("#showCPU").val())+
				   			   				  parseInt($("#showRAM").val())+
				   			   				  parseInt($("#showVGA").val())+
				   			   				  parseInt($("#showCABINET").val())+
				   			   				  parseInt($("#showSTORAGE").val()))
                   }
                   function  CalculateTotalPrice(){
                	   $("#totalPrice").html("")
                	   $("#totalPrice").html(parseInt($("#CPUPrice").html())+
			                			     parseInt($("#RAMPrice").html())+
			                			     parseInt($("#MBPrice").html())+
			                			     parseInt($("#VGAPrice").html())+
			                			     parseInt($("#STORAGEPrice").html())+
			                			     parseInt($("#CABINETPrice").html())+
			                			     parseInt($("#POWERSUPPLIERPrice").html()))
                   }
                   function PowerSupplierByTotalPower(){
                	   $.post("showPowerSupplierByTotalPower",{"PowerModel":parseInt($("#totalPower").html())},function(data,status){
                		   if (status == "success") {
                               var querydata = $.parseJSON(data);
                               $("#showPOWERSUPPLIER").html("")
                               $.each(querydata, function (index, json) {
                            	  $("#showPOWERSUPPLIER").append("<option value='"+json.psu+"' name='"+json.model+"'>" + json.model+ "</option>")
                               })
                           }
                		   })
                   }
                   function returnPageToCart(){
//                 	   sessionStorage.MBname= $("#showMB").find("option:selected").text()
//                 	   sessionStorage.CPUname= $("#showCPU").find("option:selected").text()
//                 	   sessionStorage.RAMname= $("#showRAM").find("option:selected").text()
//                 	   sessionStorage.POWERSUPPLIERname= $("#showPOWERSUPPLIER").find("option:selected").text()
//                 	   sessionStorage.CABINETname= $("#showCABINET").find("option:selected").text()
//                 	   sessionStorage.VGAname= $("#showVGA").find("option:selected").text()
//                 	   sessionStorage.STORAGEname= $("#showSTORAGE").find("option:selected").text()
                	   
						
                	    sessionStorage.TotalPrice= $("#totalPrice").html()
						$.post("showCartDetail",{"model":$("#showMB").find("option:selected").text(),"CartId":sessionStorage.CartId})
						$.post("showCartDetail",{"model":$("#showCPU").find("option:selected").text(),"CartId":sessionStorage.CartId})
						$.post("showCartDetail",{"model":$("#showRAM").find("option:selected").text(),"CartId":sessionStorage.CartId})
						$.post("showCartDetail",{"model":$("#showPOWERSUPPLIER").find("option:selected").text(),"CartId":sessionStorage.CartId})
						$.post("showCartDetail",{"model":$("#showCABINET").find("option:selected").text(),"CartId":sessionStorage.CartId})
						$.post("showCartDetail",{"model":$("#showVGA").find("option:selected").text(),"CartId":sessionStorage.CartId})
						$.post("showCartDetail",{"model":$("#showSTORAGE").find("option:selected").text(),"CartId":sessionStorage.CartId})
                	   
                	    window.location.href="/FinalProject/ShowCart.html";
                   }
                   
                   function turnpage(){
                	   
                	    $(".custforcard").hide();
                     	$("#pg"+$(this).html()).show();
                     	
					$("#pagebtn li").attr("class","page-item")
                    $("#pagebtn li a").attr("class","mypage-link")
                       
                   	$(this).parent().attr("class", "page-item active");
                    $(this).attr("class", "mypage-link mypagestyle");
                   }
    </script>
</body>

</html>